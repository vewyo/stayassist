flows:
  greet:
    description: Welcome guests and ask how the assistant can help them. This flow is triggered when users greet the assistant (hello, hi, hey, etc.).
    steps:
      - action: utter_greet_and_offer_help
  greet_followup:
    description: Handle follow-up greetings after the initial welcome. Triggered when user says hello, hi, hey after already being greeted.
    steps:
      - action: utter_greet_followup
  book_room:
    description: Collect all information required to create a room reservation.
    steps:
      - collect: guests
        description: "ask for the number of guests, convert words to numbers, handle invalid numbers"
      - collect: room_type
        description: "ask which room type the guest wants (standard or suite), handle questions about available rooms"
      - action: action_show_booking_calendar
      - collect: arrival_date
        description: "ask for the desired arrival date using calendar widget, handle typos and invalid dates gracefully"
      - collect: departure_date
        description: "ask for the departure date using calendar widget (second click), must be after arrival date"
      - collect: payment_option
        description: "ask whether the guest wants to pay at the desk or online"
      - action: action_confirm_payment_received
      - collect: first_name
        description: "ask for the guest's first name"
      - collect: last_name
        description: "ask for the guest's last name"
      - collect: email
        description: "ask for the guest's email address"
      - action: action_show_booking_summary
  cancel_booking:
    description: Allow guests to cancel an existing reservation when they provide the booking number.
    steps:
      - collect: booking_number
        description: "ask for the booking number the guest wants to cancel"
      - action: action_cancel_booking
  change_date:
    description: Allow guests to change or modify the dates of an existing reservation. This flow is triggered when users ask to change dates, modify booking dates, update reservation dates, change arrival date, change departure date, or modify dates. Requires booking number (numbers only, no letters) and email for verification.
    steps:
      - collect: change_booking_number
        description: "ask for the booking number (numbers only, no letters)"
      - collect: change_booking_email
        description: "ask for the email address associated with the booking"
      - action: action_verify_booking_for_change
      - action: action_show_booking_calendar
      - collect: arrival_date
        description: "ask for the new arrival date using calendar widget"
      - collect: departure_date
        description: "ask for the new departure date using calendar widget (must be after arrival date)"
      - action: action_change_date
  change_room:
    description: Allow guests to change or modify the room type of an existing reservation. This flow is triggered when users ask to change room, modify room type, update room, change to suite, change to standard, or switch room. Requires booking number (numbers only, no letters) and email for verification.
    steps:
      - collect: change_booking_number
        description: "ask for the booking number (numbers only, no letters)"
      - collect: change_booking_email
        description: "ask for the email address associated with the booking"
      - action: action_verify_booking_for_change_room
      - collect: room_type
        description: "ask which room type the guest wants (standard or suite)"
      - action: action_change_room
  change_guests:
    description: Allow guests to change or modify the number of guests of an existing reservation. This flow is triggered when users ask to change guests, modify number of guests, update guests, change to X guests, or change to X people. Requires booking number (numbers only, no letters) and email for verification.
    steps:
      - collect: change_booking_number
        description: "ask for the booking number (numbers only, no letters)"
      - collect: change_booking_email
        description: "ask for the email address associated with the booking"
      - action: action_verify_booking_for_change_guests
      - collect: guests
        description: "ask for the number of guests, convert words to numbers, handle invalid numbers"
      - action: action_change_guests
  facility_information:
    description: Provide fixed information about on-site facilities such as pool hours, parking, and meals.
    steps:
      - collect: facility_topic
        description: "ask which facility the guest needs information about (pool, parking, breakfast, lunch, dinner, gym)"
      - action: action_answer_facility_question
  clarification:
    description: Provide simpler, step-by-step explanation when guest doesn't understand.
    steps:
      - action: action_clarify_explanation
